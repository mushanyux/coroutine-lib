# coroutine-lib
协程库

项目描述：

本项目为了实现服务端O密集型任务的处理，在Linux环境下使用C++开发了一个协程库。

项目主要实现了协程和协程调度器，定时器等。同时，对常见的系统的API，如sleep、socket网络编程，和Socket IO系类接口API进行了hook,实现非阻塞异步的效果。

测试：

消息条数1000000条，并发连接1000，epoll、libevent、本项目RPS分别为27082、25432、26040，性能无太大差异，在单线程下本系统几乎没有损失，同时经过其他条件测试，本项目在大流量、多线程、IO密集条件下有一定性能优势。

项目难点：

基于epoll和定时器实现多线程IO协程调度器，支持对定时任务协程和IO任务协程的调度，且支持主线程（创建调度器的线程）参与调度。

对sleep、IO等阻塞系统调用进行hook封装，在函数内部进行协程切换，将阻塞系统调用改造为非阻塞。

个人收获：

深入了解了协程技术，熟悉了共享栈、对称/非对称协程等概念

了解了主要协程库的优缺点以及适用场景，对进程、线程、协程的区别有了更深入的了解

熟练掌握了Linux网络编程、系统编程接口，对IO多路复用、事件驱动模型有了一定的了解。